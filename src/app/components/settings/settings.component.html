<div class="settings__container">
  <form [formGroup]="groupControl">
    <div class="settings__form--item">
      <mat-form-field
        hintLabel="Max 30 characters"
        appearance="outline"
        class="settings__form--field--item"
      >
        <mat-label>
          Project name
        </mat-label>
        <input
          #nameField
          matInput
          maxlength="30"
          (blur)="handlerMeta({name: nameField.value})"
          formControlName="projectnameControl"
          required
        >
        <mat-hint
          align="end">{{nameField.value?.length || 0}}/30
        </mat-hint>
        <mat-error
          *ngIf="groupControl.get('projectnameControl')?.hasError('required')"
        >
          Please set a name for your Project!
        </mat-error>
      </mat-form-field>
    </div>
    <div class="settings__form--item">
      <mat-form-field
        appearance="outline"
        class="settings__form--field--item"
      >
        <mat-label>
          Project ID
        </mat-label>
        <input
          matInput
          #idField
          disabled
          [value]="meta?.pid"
        >
      </mat-form-field>
    </div>
    <div class="settings__form--item">
      <mat-form-field appearance="outline">
        <mat-label>
          Choose a starting date
        </mat-label>
        <input
          #dateField
          matInput
          (dateChange)="handlerSettings({startDate: dateField.value})"
          formControlName="startdateControl"
          [matDatepicker]="datePicker"
          required
        >
        <mat-datepicker-toggle
          matSuffix
          [for]="datePicker"
        ></mat-datepicker-toggle>
        <mat-datepicker
          #datePicker
          startView="multi-year">
        </mat-datepicker>
        <mat-hint
          *ngIf="selectedPeriod">{{selectedPeriod}}
        </mat-hint>
        </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Select a period</mat-label>
        <mat-select
          #period
          formControlName="periodControl"
          (selectionChange)="handlerSettings({period: period.value})"
          required
        >
          <mat-option
            [value]="period"
            *ngFor="let period of periods"
          >
            {{period | toYear}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="settings__form--item">
      <mat-form-field
        appearance="outline"
        class="settings__form--field--item--mid"
      >
        <mat-label>
          Tax system (country)
        </mat-label>
        <mat-select
          #taxSystem
          formControlName="taxsystemControl"
          (selectionChange)="handlerSettings({taxSystem: taxSystem.value})"
          required
        >
          <mat-option>
            No tax system
          </mat-option>
          <mat-option
            *ngFor="let country of taxCountries"
            [value]="country?.rates"
            #taxSelect
          >
            {{country.name}}
          </mat-option>
        </mat-select>
        <mat-hint *ngIf="currentCountry">
          {{currentCountry | taxRates}}
        </mat-hint>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Tax payments</mat-label>
        <mat-select
          #taxInterval
          formControlName="taxpayControl"
          (selectionChange)="handlerSettings({taxInterval: taxInterval.value})"
          required
        >
          <mat-option
            [value]="interval"
            *ngFor="let interval of intervals"
          >
            {{interval}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </form>
</div>
